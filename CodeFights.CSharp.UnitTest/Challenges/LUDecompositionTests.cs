using Microsoft.VisualStudio.TestTools.UnitTesting;
using CodeFights.CSharp.Challenges;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using CodeFights.CSharp.UnitTest;

namespace CodeFights.CSharp.Challenges.Tests
{
    [TestClass]
    public class LUDecompositionTests
    {
        [TestMethod]
        public void luDecompositionTest()
        {
            var l = new LUDecomposition();
            Func<string, int> parse = int.Parse;
            var matrix = Util.ParseJaggedArray("[[4,3], [6,3]]", parse);
            var expected = "[[4,3],[1.5,-1.5]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));

            matrix = Util.ParseJaggedArray(@"
[[-81,8,-25,96,28,9,84], 
 [-8,-74,-32,-89,80,-14,-13], 
 [79,-52,-88,74,-49,-88,-75], 
 [45,9,-23,54,-12,52,45], 
 [54,-96,16,-29,-46,51,-29], 
 [63,41,-47,-91,34,-8,-95], 
 [-16,62,47,6,-8,-2,3]]", parse);
            expected = "[[-81,8,-25,96,28,9,84],[0.0987654320987654,-74.7901234567901,-29.5308641975309,-98.4814814814815,77.2345679012346,-14.8888888888889,-21.2962962962963],[-0.975308641975309,0.590954110267415,-94.931330472103,225.827665896335,-67.3334433806537,-70.4235721360185,19.5110597556949],[-0.555555555555556,-0.179762297788049,0.444504724445047,-10.7513884686677,47.3694526460022,85.6271496485792,79.1656372697333],[-0.666666666666667,1.21228128095081,-0.370089063700891,-22.1332906575855,902.559138445875,1944.19711877244,1812.23399097437],[-0.777777777777778,-0.631396500495213,0.896333468963335,26.1297498535919,-1.18868146151449,126.337283989992,24.9891606437004],[0.197530864197531,-0.807857378672829,-0.29580903295809,2.3922576187612,-0.0934832076890959,-0.472783817162961,-33.1820965619204]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));

            matrix = Util.ParseJaggedArray("[[-21,-98],[23,43]]", parse);
            expected = "[[-21,-98],[-1.0952380952381,-64.3333333333333]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));

            matrix = Util.ParseJaggedArray(@"[[-31,-100,28,11,-21], 
 [-99,-37,-58,-10,25], 
 [-5,-96,-81,-12,100], 
 [34,-84,71,9,-38], 
 [-19,-66,-44,61,-74]]", parse);
            expected = "[[-31,-100,28,11,-21],[3.19354838709677,282.354838709677,-147.41935483871,-45.1290322580645,92.0645161290323],[0.161290322580645,-0.282874443048098,-127.217296926768,-26.5400434136867,129.429795498686],[-1.09677419354839,-0.685936250428425,-0.00463300144674641,-10.0140831030603,2.71777935633699],[0.612903225806452,-0.0166799954301382,0.500091151317473,-6.66838417894268,-106.196895133823]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));

            matrix = Util.ParseJaggedArray("[[68]]", parse);
            expected = "[[68]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));

            matrix = Util.ParseJaggedArray("[[-65,-87],[21, -94]]", parse);
            expected = "[[-65,-87],[-0.323076923076923,-122.107692307692]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));

            matrix = Util.ParseJaggedArray(@"[[41,49,44,-68,-3,38,12,-5,-59,-93], 
 [53,-16,68,-23,-47,36,-29,-90,30,23], 
 [-94,55,82,-10,-11,99,-31,62,-60,21], 
 [-9,84,-22,-37,-35,71,49,-70,78,-31], 
 [-84,-27,-91,67,-19,-7,-87,-24,85,24], 
 [67,74,22,-9,-68,-84,-78,-11,-46,-4], 
 [51,92,72,18,24,16,72,4,-89,19], 
 [-45,-6,27,6,17,85,-89,-28,8,-44], 
 [-69,-47,0,-94,-73,61,1,35,-81,-49], 
 [92,-11,-42,82,70,-68,73,-63,61,5]]", parse);
            expected = "[[41,49,44,-68,-3,38,12,-5,-59,-93],[1.29268292682927,-79.3414634146341,11.1219512195122,64.9024390243902,-43.1219512195122,-13.1219512195122,-44.5121951219512,-83.5365853658537,106.268292682927,143.219512195122],[-2.29268292682927,-2.10913003381494,206.335690132186,-29.014755610206,-108.827851214264,158.446049800184,-97.3698124807869,-125.652935751614,28.8653550568706,109.849062403935],[-0.219512195121951,-1.19428220104519,0.00456191057940135,25.7173611835342,-86.6618524753803,62.9473339193397,-1.08178364446299,-170.290600557203,191.831429805873,119.128758510749],[-2.04878048780488,-0.924992314786351,0.0457219052159533,-0.426023722971309,-96.9780032731328,78.2885567801642,-99.5970047069388,-178.317345923791,142.824266137558,11.6695315364896],[1.63414634146341,0.0765447279434367,-0.24597666900076,3.5002447608151,-2.23526750897973,-151.454321706079,-336.992725446293,170.129139106577,-302.825955066191,-226.862070529221],[1.24390243902439,-0.391331079003996,0.104783897736923,5.09476791171231,-4.78234407348074,-0.00458781142512872,-422.484813813976,6.29215979347331,-272.739433567603,-372.947701488384],[-1.09756097560976,-0.602213341530895,0.397364461196943,-0.700678378495808,0.306657820013277,-0.501420564469947,0.480809394853812,-16.2202538575184,65.6764975781027,41.9812602317544],[-1.68292682926829,-0.446972025822318,0.382968072585331,-6.54490651295495,6.42247928012437,0.214031013392838,-1.75934221027551,-2.63426584599228,-47.6338512810595,24.1761850346682],[2.24390243902439,1.52443897940363,-0.764222821471671,4.41226526858517,-4.55438171539577,-0.439994343129807,1.31978114282342,0.904256772107914,-0.521511197938609,-26.1398740424584]]";
            Assert.AreEqual(expected, Util.JaggedArrayToString(l.luDecomposition(matrix)));
        }
    }
}